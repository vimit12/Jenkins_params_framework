{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Jenkins Pipeline Parameters",
  "type": "object",
  "properties": {
    "APP_NAME": {
      "type": "string",
      "description": "App name",
      "minLength": 1
    },
    "IMAGE_TAG": {
      "type": "string",
      "description": "Image tag",
      "minLength": 1
    },
    "REPLICAS": {
      "type": "integer",
      "description": "Number of replicas",
      "minimum": 1,
      "maximum": 20,
      "x-coerce": true
    },
    "CPU_LIMIT": {
      "type": "string",
      "description": "CPU limit",
      "pattern": "^[0-9]+m$"
    },
    "MEMORY_LIMIT": {
      "type": "string",
      "description": "Memory limit",
      "pattern": "^[0-9]+Mi$"
    },
    "RUN_TESTS": {
      "type": "boolean",
      "description": "Run tests before deploy",
      "x-coerce": true
    },
    "ALLOW_PROD_DEPLOY": {
      "type": "boolean",
      "description": "Allow prod deploy",
      "x-coerce": true
    },
    "ENV": {
      "type": "string",
      "description": "Environment",
      "enum": [
        "dev",
        "qa",
        "staging",
        "prod"
      ]
    }
  },
  "additionalProperties": false,
  "required": [
    "APP_NAME",
    "IMAGE_TAG",
    "ENV"
  ]
}
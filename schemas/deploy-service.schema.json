{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Jenkins Pipeline Parameters",
  "type": "object",
  "properties": {
    "APP_NAME": {
      "type": "string",
      "description": "Application name (lowercase alphanumeric with hyphens)",
      "minLength": 2,
      "maxLength": 50,
      "pattern": "^[a-z0-9](-?[a-z0-9])*$"
    },
    "IMAGE_TAG": {
      "type": "string",
      "description": "Docker image tag",
      "pattern": "^[a-zA-Z0-9._-]+$",
      "minLength": 1,
      "maxLength": 128
    },
    "REPLICAS": {
      "type": "integer",
      "description": "Number of replicas",
      "minimum": 1,
      "maximum": 20,
      "x-coerce": true
    },
    "CPU_LIMIT": {
      "type": "string",
      "description": "CPU limit (e.g., 500m or 2)",
      "pattern": "^[0-9]+(m|)$"
    },
    "MEMORY_LIMIT": {
      "type": "string",
      "description": "Memory limit (e.g., 512Mi or 2Gi)",
      "pattern": "^[0-9]+(Mi|Gi)$"
    },
    "RUN_TESTS": {
      "type": "boolean",
      "description": "Run tests before deploy",
      "x-coerce": true
    },
    "ALLOW_PROD_DEPLOY": {
      "type": "boolean",
      "description": "Allow production deployment",
      "x-coerce": true
    },
    "ENV": {
      "type": "string",
      "description": "Environment"
    }
  },
  "additionalProperties": false,
  "required": [
    "APP_NAME",
    "IMAGE_TAG",
    "ENV"
  ]
}